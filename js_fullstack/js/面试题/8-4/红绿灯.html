<style>
  div {
    background-color: grey;
    display: inline-block;
    margin: 30px;
    width: 100px;
    height: 100px;
    border-radius: 50px;
  }

  .green.light {
    background-color: green;
  }

  .yellow.light {
    background-color: yellow;
  }

  .red.light {
    background-color: red;
  }
</style>

<div class="red"></div>
<div class="yellow"></div>
<div class="green"></div>

<!-- <button id="next" onclick="go();">开始</button> -->

<script>
  const redColor = document.querySelector(".red");
  const yellowColor = document.querySelector(".yellow");
  const greenColor = document.querySelector(".green");

  function green() {
    clear();
    greenColor.classList.add("light");
  }

  function red() {
    clear();
    redColor.classList.add("light");
  }
  function yellow() {
    clear();
    yellowColor.classList.add("light");
  }
  function clear() {
    var lights = document.getElementsByTagName("div");
    for (var i = 0; i < 3; i++) lights[i].classList.remove("light");
  }

  function test(time) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve();
      }, time);
    });
  }

  async function bingbing() {
    for (let i = 0; i < 5; i++) {
      red();
      await test(1000);
      yellow();
      await test(2000);
      green();
      await test(3000);
    }
  }
  bingbing();

  // async 调用 返回的时 一个 promise
  // 外界时可以知道 这个 async 函数 有没有调用完成的
  // let i = 0
  // function once() {
  //   i++
  //   console.log(i)
  //   if(i>5){
  //     return
  //   }
  //   red()
  //   setTimeout(() => {
  //     yellow()
  //     setTimeout(() => {
  //       green()
  //       setTimeout(() => {
  //         // 这里完成一次
  //         once();
  //       }, 3000);
  //     }, 2000);
  //   }, 1000);
  // }
  // once()
</script>
